# tproj - tmuxé–‹ç™ºç’°å¢ƒ

tmuxãƒ™ãƒ¼ã‚¹ã®é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’ç®¡ç†ã™ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€‚

## æ§‹æˆ

```
tproj/
â”œâ”€â”€ install.sh                    # ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©
â”œâ”€â”€ bin/
â”‚   â”œâ”€â”€ tproj                    # tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â”œâ”€â”€ agent-monitor            # Agent Teams å€‹åˆ¥ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆçŠ¶æ…‹è¡¨ç¤º
â”‚   â”œâ”€â”€ team-watcher             # Agent Teams ãƒ•ãƒƒã‚¯ãƒ™ãƒ¼ã‚¹ãƒšã‚¤ãƒ³ç®¡ç†ãƒ‡ãƒ¼ãƒ¢ãƒ³
â”‚   â””â”€â”€ reflow-agent-pane        # tmux after-split-window ãƒ•ãƒƒã‚¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ tmux/tmux.conf           # tmuxè¨­å®š
â”‚   â”œâ”€â”€ yazi/                    # yaziãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼è¨­å®š
â”‚   â”‚   â”œâ”€â”€ yazi.toml
â”‚   â”‚   â”œâ”€â”€ keymap.toml
â”‚   â”‚   â””â”€â”€ plugins/
â”‚   â”‚       â”œâ”€â”€ open-finder.yazi/
â”‚   â”‚       â”œâ”€â”€ open-terminal.yazi/
â”‚   â”‚       â””â”€â”€ copy-path.yazi/
â”‚   â””â”€â”€ claude/skills/           # Claude Codeã‚¹ã‚­ãƒ«
â”‚       â””â”€â”€ codex/               # Codexé€£æºã‚¹ã‚­ãƒ«
â””â”€â”€ docs/
    â””â”€â”€ reference/
        â””â”€â”€ agent-teams.md       # Agent Teams å®Œå…¨ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹
```

## tproj ã‚³ãƒãƒ³ãƒ‰

```bash
tproj      # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³èµ·å‹•ï¼ˆè‡ªå‹•ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆï¼‰
tproj -n   # ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãªã—ã§èµ·å‹•ï¼ˆã‚ªãƒ•ãƒ©ã‚¤ãƒ³ç”¨ï¼‰
```

### ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 â”‚   codex 30% â”‚
â”‚     claude      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚   yazi  70% â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         dev window

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            git                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         git window
```

## codex ã‚¹ã‚­ãƒ«

Claude Codeå†…ã§ `/codex` ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€Codexãƒšã‚¤ãƒ³ã¨é€£æºã€‚

**ãƒ¢ãƒ¼ãƒ‰:**
- **ask**ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰: `/codex`, `Codexã«èã„ã¦` - è³ªå•ãƒ»ç›¸è«‡ãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼
- **impl**: `/codex impl`, `Codexã«ä»»ã›ã¦` - å®Ÿè£…ã‚¿ã‚¹ã‚¯ï¼ˆå®Œå…¨è‡ªå‹•ï¼‰

**æ©Ÿèƒ½:**
- @roleã‚¿ã‚°ã§ãƒšã‚¤ãƒ³æ¤œå‡ºï¼ˆAgent Teamså¯¾å¿œã€ãƒšã‚¤ãƒ³ç•ªå·ã«éä¾å­˜ï¼‰
- å¼•æ•°ãªã—ãªã‚‰ç›´è¿‘ã®ä½œæ¥­ã‹ã‚‰è‡ªå‹•ã§è³ªå•ã‚’æ§‹ç¯‰
- impl ãƒ¢ãƒ¼ãƒ‰ã¯æ‰¿èªã‚’è‡ªå‹•ã§è¡Œã†

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
./install.sh
```

## è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å¤‰æ›´

1. ã“ã®ãƒªãƒã‚¸ãƒˆãƒªå†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†
2. `./install.sh` ã§å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

## ä¸»ãªè¨­å®š

### tmux (`config/tmux/tmux.conf`)
- Prefix: `C-a`
- åˆ†å‰²: `|`ï¼ˆå·¦å³ï¼‰ã€`-`ï¼ˆä¸Šä¸‹ï¼‰
- ãƒã‚¦ã‚¹æ“ä½œæœ‰åŠ¹
- Ghosttyã‚¿ãƒ–é€£æºï¼ˆğŸ””é€šçŸ¥ï¼‰

### yazi (`config/yazi/`)

**åŸºæœ¬æ“ä½œ:**
- `j`/`k`: ä¸Šä¸‹ç§»å‹•ï¼ˆåè»¢ï¼‰
- `â†`/`â†’`: è¦ª/å­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç§»å‹•
- `Enter`: ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªâ†’Finderã€ãƒ•ã‚¡ã‚¤ãƒ«â†’ã‚ªãƒ¼ãƒ—ãƒ³
- `y`: ãƒ•ã‚¡ã‚¤ãƒ«/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ã‚³ãƒ”ãƒ¼ï¼ˆyankï¼‰
- `x`: ãƒ•ã‚¡ã‚¤ãƒ«/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ã‚«ãƒƒãƒˆ
- `v`: ãƒšãƒ¼ã‚¹ãƒˆ
- `c`: ãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼
- `p`: ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ï¼ˆãƒ•ãƒ«ãƒ‘ã‚¹ï¼‰ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼
- `T`: ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ãƒšã‚¤ãƒ³ã‚’ãƒˆã‚°ãƒ«ï¼ˆé–‹ã/é–‰ã˜ã‚‹ï¼‰
- `h`: ãƒ˜ãƒ«ãƒ—è¡¨ç¤º
- `q`: çµ‚äº†

**ã‚³ãƒãƒ³ãƒ‰ãƒ¢ãƒ¼ãƒ‰ã‹ã‚‰æŠœã‘ã‚‹:**
- `Esc`: å…¥åŠ›ãƒ¢ãƒ¼ãƒ‰ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«
- `Ctrl+C`: å¼·åˆ¶ä¸­æ–­
- `Ctrl+[`: Escã®ä»£æ›¿

**å†èµ·å‹•:** `q` ã§çµ‚äº†å¾Œã€`yazi` ã§å†èµ·å‹•

**ãã®ä»–:**
- batã«ã‚ˆã‚‹ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
- éš ã—ãƒ•ã‚¡ã‚¤ãƒ«è¡¨ç¤ºãƒ‡ãƒ•ã‚©ãƒ«ãƒˆON

## Agent Teams å¯¾å¿œ

tproj ã¯ Claude Code Agent Teams ã¨çµ±åˆã€‚è©³ç´°ã¯ `docs/reference/agent-teams.md` ã‚’å‚ç…§ã€‚

### ãƒšã‚¤ãƒ³ç®¡ç†

å„ãƒšã‚¤ãƒ³ã« `@role` ã‚¿ã‚°ã‚’è¨­å®šã—ã€ãƒšã‚¤ãƒ³ç•ªå·ã«ä¾å­˜ã—ãªã„å‹•çš„ç®¡ç†ã‚’å®Ÿç¾:
- `@role=claude` - Claude Code ãƒ¡ã‚¤ãƒ³ãƒšã‚¤ãƒ³
- `@role=codex` - Codex ãƒšã‚¤ãƒ³
- `@role=yazi` - yazi ãƒšã‚¤ãƒ³
- `@role=agent-*` - Agent Teams ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒšã‚¤ãƒ³ï¼ˆå‹•çš„ã«è¿½åŠ /å‰Šé™¤ï¼‰

### å‹•çš„ãƒšã‚¤ãƒ³ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆãƒ•ãƒƒã‚¯ãƒ™ãƒ¼ã‚¹ï¼‰

`teammateMode: "tmux"` ã§ Agent Teams ã®ãƒšã‚¤ãƒ³ä½œæˆã‚’å—ã‘å…¥ã‚Œã€
tmux `after-split-window` ãƒ•ãƒƒã‚¯ã§å³åº§ã« Codex ã®ä¸Šã«å†é…ç½®ã™ã‚‹ä»•çµ„ã¿ã€‚

**ãƒ•ãƒ­ãƒ¼:**
1. `TeamCreate` hook -> `team-watcher` èµ·å‹•
2. `team-watcher` ãŒ `after-split-window` ãƒ•ãƒƒã‚¯ + `TPROJ_AGENTS_ACTIVE` ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š
3. Agent Teams ãŒ `split-window` å®Ÿè¡Œ -> ãƒ•ãƒƒã‚¯ç™ºç«
4. `reflow-agent-pane` ãŒæ–°ãƒšã‚¤ãƒ³ã‚’ Codex ã®ä¸Šã« `move-pane` + `@role=agent-pending` ã‚¿ã‚°
5. `team-watcher` ãƒãƒ¼ãƒªãƒ³ã‚°ï¼ˆ3ç§’ï¼‰ã§ `config.json` ã®æ–°ãƒ¡ãƒ³ãƒãƒ¼æ¤œçŸ¥ -> `agent-$name` ã«ãƒªãƒãƒ¼ãƒ 
6. Agent çµ‚äº† -> ãƒšã‚¤ãƒ³ãŒè‡ªç„¶ã«é–‰ã˜ã‚‹ï¼ˆClaude ãƒ—ãƒ­ã‚»ã‚¹çµ‚äº† -> tmux ãŒã‚¹ãƒšãƒ¼ã‚¹å›åï¼‰
7. å…¨ agent æ¶ˆå¤± + config å‰Šé™¤ -> team-watcher è‡ªèº«ã‚‚çµ‚äº†ã€ãƒ•ãƒƒã‚¯è§£é™¤

```
åˆæœŸçŠ¶æ…‹:              agent spawnå¾Œ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        â”‚ codex  â”‚   â”‚        â”‚agent-1 â”‚
â”‚ claude â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚ claude â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        â”‚ yazi   â”‚   â”‚        â”‚ codex  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤
                      â”‚        â”‚ yazi   â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### teammateMode

`tmux` ãƒ¢ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã€‚Agent Teams ã®ãƒšã‚¤ãƒ³ä½œæˆã‚’å—ã‘å…¥ã‚ŒãŸä¸Šã§ã€
`reflow-agent-pane` ãƒ•ãƒƒã‚¯ã§ tproj ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã«å³æ™‚å†é…ç½®ã€‚
è¨­å®š: `~/.claude/settings.json` ã® `teammateMode: "tmux"`
